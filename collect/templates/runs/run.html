{% extends "common/base.html" %}

{% load static %}
{% load humanize %}


{% block head-extra %}
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
{% endblock %}
{% block head-extra-2 %}
	{% with static_version=100 %}
		<script src="{% static 'js/plot.js' %}?v={{static_version}}"></script>
	{% endwith %}
{% endblock %}


{% block title %}Device {{object.device.name}}, Run {{object.name}} {% endblock %}


{% load common_tags %}


{% block content %}


<h1>Run {{object.name}}</h1>


<h2>Details</h2>
	<table class="table table-condensed table-no-border width-auto table-td-vertical-align-middle">
		<tr>
			<td><label>Device:</label></td>
			<td><span class="monospace">{{object.device.name}}</span></td>
		</tr>
		<tr>
			<td><label>Columns:</label></td>
			<td>{{object.device.columns|join:", "}}</td>
		</tr>
		<tr>
			<td><label>Date from:</label></td>
			<td>{{object.date_from}}</td>
		</tr>
		<tr>
			<td><label>Date to:</label></td>
			<td>{{object.date_to|default_if_none:"current"}}</td>
		</tr>
		<tr>
			<td><label>Num meas.:</label></td>
			<td>{{object.num_measurements|intcomma}}</td>
		</tr>
	</table>


<h2>Download data</h2>
	<div class="div-show-hide-panel-link">
		<button type="button" class="btn btn-link btn-show-hide-panel" data-show-msg="Show download panel" data-hide-msg="Hide download panel">Show download panel</button>
	</div>
	<div class="div-show-hide-panel display-none">
		{% include "runs/run_download_data.html" with run=object csrf_token=csrf_token only %}
	</div>


<h2>Delete data</h2>
	<div class="div-show-hide-panel-link">
		<button type="button" class="btn btn-link btn-show-hide-panel" data-show-msg="Show data panel" data-hide-msg="Hide data panel">Show delete panel</button>
	</div>
	<div class="div-show-hide-panel display-none">
		{% include "runs/run_delete_run_detach_data.html" with run=object csrf_token=csrf_token only %}
		{% include "runs/run_delete_run_and_data.html" with run=object csrf_token=csrf_token only %}
	</div>


<h2>Data</h2>
	<div class="div-show-hide-panel-link">
		<button type="button" class="btn btn-link btn-show-hide-panel" data-show-msg="Show data panel" data-hide-msg="Hide data panel">Show data panel</button>
	</div>
	<div class="div-show-hide-panel display-none">
		<div class="div-ajax">
			{% include "runs/run_measurements.html" with run=object measurements_page=measurements_page measurements_extra=measurements_extra only %}
		</div>
	</div>


<div class="margin-bottom-200px"></div>

{% endblock %}

